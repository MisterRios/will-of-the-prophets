{% load static %}

<div class="starfield board border border-orange">
    <div class="row no-gutters">
        {% for square in squares %}
    
            <div class="col rounded square
                {% if square.is_current_position %}square-current{% endif %}
                {% if square.special or square.butthole_start %}
                    square-bg-contain
                {% else %}
                    {% if square.number|divisibleby:2 %}
                        square-red
                    {% else %}
                        square-green
                    {% endif %}
                {% endif %}
                "
                {% if square.special or square.butthole_start %}
                    style="background-image:
                    {% if square.special %}
                        url('/{{ square.special.image.url }}')
                    {% endif %}
                    {% if square.butthole_start %}
                        url('{% static 'will_of_the_prophets/butthole_start.png' %}')
                    {% endif %}
                    ;"
                {% endif %}
                {% if square.butthole_start %}
                    id="butthole-start-{{ square.butthole_start.id }}"
                {% endif %}
                {% if square.butthole_end %}
                    data-buttholes-start-at='[
                        {% for butthole_end in square.butthole_end %}
                            "butthole-start-{{ butthole_end.id }}"
                            {% if not forloop.last %},{% endif %}
                        {% endfor %}
                    ]'
                {% endif %}
                >
                <p class="square-number
                    {% if square.special or square.butthole_start %}
                        invisible
                    {% endif %}
                ">{{ square.number }}</p>
                {% if square.is_current_position %}
                    <img class="img-runabout img-fluid" src="{% static 'will_of_the_prophets/runabout.png' %}" alt="Runabout"/>
                {% endif %}
            </div>
            {% if forloop.counter|divisibleby:"10" %}
                </div>
                <div class="row no-gutters">
            {% endif %}
        {% endfor %}
    </div>
</div>
